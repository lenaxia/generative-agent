============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.2, pluggy-1.6.0 -- /home/mikekao/personal/generative-agent/venv/bin/python
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/mikekao/personal/generative-agent
configfile: pyproject.toml
plugins: mock-3.15.1, asyncio-1.2.0, benchmark-5.1.0, timeout-2.4.0, cov-7.0.0, anyio-4.10.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
timeout: 10.0s
timeout method: signal
timeout func_only: False
collecting ... collected 882 items

tests/cli/test_cli_workflow_completion.py::TestCLIWorkflowCompletion::test_workflow_completion_detection_bug PASSED [  0%]
tests/cli/test_cli_workflow_completion.py::TestCLIWorkflowCompletion::test_get_request_status_structure PASSED [  0%]
tests/cli/test_cli_workflow_completion.py::TestCLIWorkflowCompletion::test_cli_completion_logic_simulation PASSED [  0%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_task_context_initialization PASSED [  0%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_conversation_history_management PASSED [  0%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_progressive_summary_functionality PASSED [  0%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_checkpoint_creation_and_restoration PASSED [  0%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_pause_and_resume_functionality PASSED [  0%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_task_execution_preparation PASSED [  1%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_task_completion_and_progression PASSED [  1%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_performance_metrics_tracking PASSED [  1%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_metadata_management PASSED [  1%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_error_handling_and_recovery PASSED [  1%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_context_serialization_and_persistence PASSED [  1%]
tests/common/test_comprehensive_task_context.py::TestComprehensiveTaskContext::test_integration_with_strands_agent PASSED [  1%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_checkpoint_creation PASSED [  1%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_checkpoint_resume PASSED [  1%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_completion_tracking PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_conversation_history_management PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_error_handling PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_initialization_from_tasks PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_initialization_with_task_graph PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_metadata_management PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_pause_resume_functionality PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_performance_metrics PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_progressive_summary_management PASSED [  2%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_serialization PASSED [  3%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_state_isolation PASSED [  3%]
tests/common/test_task_context.py::TestTaskContext::test_task_context_task_delegation PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_checkpoint_conversation_history_tracking PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_checkpoint_metadata_preservation PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_checkpoint_progressive_summary_tracking PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_create_checkpoint_empty_graph PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_create_checkpoint_serializable PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_create_checkpoint_with_completed_tasks PASSED [  3%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_multiple_checkpoints_chronological PASSED [  4%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_resume_from_checkpoint_basic PASSED [  4%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_resume_from_checkpoint_invalid_data PASSED [  4%]
tests/common/test_task_graph_checkpoints.py::TestTaskGraphCheckpoints::test_resume_from_checkpoint_preserves_dependencies PASSED [  4%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_checkpoint_preserves_strands_integration_data PASSED [  4%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_parallel_task_execution_context PASSED [  4%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_execution_with_role_mapping PASSED [  4%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_graph_conversation_history_integration PASSED [  4%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_graph_progressive_summary_integration PASSED [  4%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_node_context_passing PASSED [  5%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_node_supports_role_based_execution PASSED [  5%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_node_supports_tool_requirements PASSED [  5%]
tests/common/test_task_graph_strands_integration.py::TestTaskGraphStrandsIntegration::test_task_result_updates_progressive_summary PASSED [  5%]
tests/debug/test_conversation_prompt_injection.py::TestConversationPromptInjection::test_message_loading_with_real_data PASSED [  5%]
tests/debug/test_conversation_prompt_injection.py::TestConversationPromptInjection::test_prompt_context_formatting PASSED [  5%]
tests/debug/test_conversation_prompt_injection.py::TestConversationPromptInjection::test_prompt_injection_simulation FAILED [  5%]

=================================== FAILURES ===================================
/home/mikekao/personal/generative-agent/tests/debug/test_conversation_prompt_injection.py:184: assert '6\'4"' in 'You are a conversational AI assistant with topic-based memory.\n\nRECENT CONVERSATION CONTEXT:\n[{\'role\': \'user\', \'content\': \'unknown\'}, {\'role\': \'assistant\', \'content\': \'I see you mentioned your height of 6\\\'4"!\'}, {\'role\': \'user\', \'content\': \'unknown\'}]\n\nRECENT TOPICS (auto-injected):\n{}\n\nRecent message count: 3\nUnanalyzed messages: 1\nCurrent topics: [\'height\']'
=========================== short test summary info ============================
FAILED tests/debug/test_conversation_prompt_injection.py::TestConversationPromptInjection::test_prompt_injection_simulation
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 1 failed, 50 passed in 8.24s =========================
